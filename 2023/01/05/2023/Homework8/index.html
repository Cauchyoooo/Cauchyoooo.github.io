

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Cauchy">
  <meta name="keywords" content="">
  
    <meta name="description" content="作业简介：  粒子效果制作(Particle System)  ps: 多图警告！加载时间可能较长，有加速器会快一些，思维导图可新建页面打开图片看大图。">
<meta property="og:type" content="article">
<meta property="og:title" content="Final: 粒子系统与流动效果">
<meta property="og:url" content="https://cauchyoooo.github.io/2023/01/05/2023/Homework8/index.html">
<meta property="og:site_name" content="Cauchy&#39;s Blog">
<meta property="og:description" content="作业简介：  粒子效果制作(Particle System)  ps: 多图警告！加载时间可能较长，有加速器会快一些，思维导图可新建页面打开图片看大图。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/show.gif">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/ParticleSystem.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/win.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/main.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/curve.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/gradient.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/emission.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/shape.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/trail.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/%E5%AF%B9%E8%B1%A1%E7%BB%93%E6%9E%84%E5%9B%BE.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/up.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/1transform.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/1main.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/1emission.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/1shape.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/1color.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/cloud.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/2transform.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/2main.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/2emission.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/2shape.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/2velocity.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/2color.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/2size.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/down.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/3transform.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/3main.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/3emission.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/3shape.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/3size.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/3collision.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/3sub.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/3trail.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/circle.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/4transform.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/4main.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/4emission.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/4shape.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/4color.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/4size.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/4noise.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/4collision.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/5main.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/bg.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/ball.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/btrail.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/design.png">
<meta property="og:image" content="https://cauchyoooo.github.io/img/2023/Homework8/Scripts.png">
<meta property="article:published_time" content="2023-01-05T12:00:00.000Z">
<meta property="article:modified_time" content="2023-05-19T13:27:27.428Z">
<meta property="article:author" content="Cauchy">
<meta property="article:tag" content="unity">
<meta property="article:tag" content="particle">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cauchyoooo.github.io/img/2023/Homework8/show.gif">
  
  
  
  <title>Final: 粒子系统与流动效果 - Cauchy&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"cauchyoooo.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":50,"cursorChar":"!","loop":false,"scope":["home"]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Cauchy</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle">粒子系统与流动效果</span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-01-05 20:00" pubdate>
          2023年1月5日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          3.3k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          28 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">粒子系统与流动效果</h1>
            
            
              <div class="markdown-body">
                
                <blockquote>
<p>作业简介：</p>
<ol>
<li><p>粒子效果制作(Particle System)</p>
<p> ps: 多图警告！加载时间可能较长，有加速器会快一些，思维导图可新建页面打开图片看大图。</p>
</li>
</ol>
</blockquote>
<span id="more"></span>


<h2 id="粒子效果制作"><a href="#粒子效果制作" class="headerlink" title="粒子效果制作"></a>粒子效果制作</h2><h3 id="一、设计要求"><a href="#一、设计要求" class="headerlink" title="一、设计要求"></a>一、设计要求</h3><ul>
<li>粒子效果制作，必须带一个控制组件，控制粒子呈现效果。</li>
</ul>
<h3 id="二、项目地址"><a href="#二、项目地址" class="headerlink" title="二、项目地址"></a>二、项目地址</h3><p><a target="_blank" rel="noopener" href="https://github.com/Cauchyoooo/3DGameDesign/tree/main/hw8/Assets">https://github.com/Cauchyoooo/3DGameDesign/tree/main/hw8/Assets</a></p>
<h3 id="三、效果展示图"><a href="#三、效果展示图" class="headerlink" title="三、效果展示图"></a>三、效果展示图</h3><p><img src="/img/2023/Homework8/show.gif" srcset="/img/loading.gif" lazyload alt="show"></p>
<h3 id="四、写在前面"><a href="#四、写在前面" class="headerlink" title="四、写在前面"></a>四、写在前面</h3><p>​		Unity实现特效的方式多种多样，这里主要使用的是内置粒子系统(Particle System)。还有一种更高级的Visual Effect Graph(VFX Graph) 。课上听和做对粒子系统有初步的了解。课后又对每个模块仔细地再阅读，跟着一些视频实践了一番，增加了不少的理解。感觉还是有自己的理解后，才能更好地制作自己的五毛特效。特效这方面感觉和美术更相关，搭配好的素材能制作出更丰富的东西。</p>
<p>​		这个特效，暂且称之为“雨云弹”特效吧。制作的灵感来源于《Splatoon 3》的大招墨雨云，因为做得不咋像就不放图了。用的是默认素材，真的是有手就能做。代码部分参考了之前做的射箭部分，主要用于获取并抛掷球体。当球体与地面碰撞时，触发该特效并销毁球体，也算是有一个控制组件呈现粒子特效啦^-^。</p>
<p>​		那让我们开始吧。</p>
<h3 id="五、粒子系统模块简介"><a href="#五、粒子系统模块简介" class="headerlink" title="五、粒子系统模块简介"></a>五、粒子系统模块简介</h3><p>:lollipop:</p>
<h4 id="模块总结图"><a href="#模块总结图" class="headerlink" title="模块总结图"></a>模块总结图</h4><p><img src="/img/2023/Homework8/ParticleSystem.png" srcset="/img/loading.gif" lazyload alt="ParticleSystem"></p>
<ul>
<li>打“√”的模块是初始粒子系统默认勾选的，也是基本必须模块；打<u>下划线</u>的模块是“雨云弹”所用到的。</li>
<li>这些模块都可以通过脚本 <a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2021.3/ScriptReference/ParticleSystem.html"><code>ParticleSystem.xx </code></a> 来访问使用。事实上，这里没有用脚本访问使用粒子系统，因为初始就直观地设定好了粒子效果，也无需在过程中修改它。</li>
</ul>
<p>:feet: </p>
<h4 id="部分模块使用方法"><a href="#部分模块使用方法" class="headerlink" title="部分模块使用方法"></a>部分模块使用方法</h4><p>如果能看懂英文的，可以通过鼠标在英文上悬停以了解功能介绍。这里只介绍部分常用的。</p>
<ul>
<li><p>仿真执行控制窗口</p>
<p>  用于控制粒子系统在场景的播放演示，可以看到场景中的粒子属性如粒子数量、速度区间等。</p>
<p>  <img src="/img/2023/Homework8/win.png" srcset="/img/loading.gif" lazyload alt="win"></p>
<ul>
<li><p>Play - 播放；Restart - 重置；Stop - 停止播放；Playback Speed - 播放速度；Playback Time - 已播放时间；</p>
<p>  Resimulate - 勾选后，粒子效果的更新会同步到仿真窗口；</p>
</li>
</ul>
</li>
<li><p>Main 模块</p>
<p>  <img src="/img/2023/Homework8/main.png" srcset="/img/loading.gif" lazyload alt="main"></p>
<ul>
<li><p>右边有三角形的都是下拉列表，可以更改选项或模式。右上角的”＋”号，可以选择显示所有模块或勾选的模块。</p>
</li>
<li><p>Duration - 粒子一次发射多久(若是循环模式，则为每轮发射时长)；Looping - 是否循环播放；</p>
<p>  Start Delay - 延迟多久发射；Start Lifetime - 粒子生命周期(存活多久)；Start Speed - 初始速度；</p>
<p>  Start Size - 初始大小；Start Rotation - 初始旋转角度；Start Color - 初始颜色；</p>
<p>  Stop Action - 当粒子效果结束时，可以选择使该对象自动销毁等</p>
</li>
</ul>
</li>
<li><p>Curve 面板</p>
<p>  当进行“大小数值”设置时，选择带有Curve的模式就会出现一条线，如果高亮该线就可以在Curve面板编辑它，不高亮时不代表没有应用，只是没有显示在面板里。</p>
<p>  <img src="/img/2023/Homework8/curve.png" srcset="/img/loading.gif" lazyload alt="curve"></p>
<ul>
<li>最下方是一些系统预设，可通过实践来理解变化趋势。</li>
<li>面板左上角的数值是峰值。</li>
<li>在线上右键可以Add Key(新建关键帧)，右键Key可以编辑它的比例（如峰值是10，Edit Key的Value为0.3，则数值大小为3）。</li>
</ul>
</li>
<li><p>Gradient Editor 线性编辑器</p>
<p>  当进行颜色设置，选择“Gradient”模式时，点击色条可打开编辑。</p>
<p>  <img src="/img/2023/Homework8/gradient.png" srcset="/img/loading.gif" lazyload alt="gradient"></p>
<ul>
<li><p>Mode可以选择Blend或者Fixed，这个两端选择不同颜色，自己尝试一下就知道区别，一般使用Blend模式，过渡比较自然。</p>
</li>
<li><p>在色条上方或下方左键即可创建一个帧(小箭头)，点击它可编辑颜色或透明度。</p>
</li>
<li><p>色条上方的帧用于设置透明度，越黑表示越透明，Alpha为透明度数值(RGBA的A)，A越接近0越透明，Location表示在色条处于什么位置。</p>
</li>
<li><p>色条下方的帧用于设置颜色，经典的颜色面板，一看就懂。</p>
</li>
<li><p>Presets 有个 New，可以把当前的set保存为预设，方便重复使用。</p>
</li>
</ul>
</li>
<li><p>Emission 模块</p>
<p>  粒子发射大致有3种方式，随时间发射、随距离变化发射、特定时间点发射，这三种模式可叠加使用。</p>
<p>  <img src="/img/2023/Homework8/emission.png" srcset="/img/loading.gif" lazyload alt="emission"></p>
<ul>
<li><p>Rate over Time 为每秒发射的粒子数量。</p>
</li>
<li><p>Rate over Distance 为每发生单位距离变化发射的粒子数量。尾迹的制作很常用。</p>
</li>
<li><p>Burst模块可控制特定时间点(Time)发射的粒子数量(Count)，Cycles表示发射轮次，Interval表示轮次间隔时间，Probability表示发射的可能概率。</p>
</li>
</ul>
</li>
<li><p>Shape 模块</p>
<p>  Shape 用于描述发射器的形状，即粒子沿着什么样的形状发射出去的。不同的shape会有不同的属性设置，在Texture上方的那部分。这里给出一些自己的理解例子。</p>
<p>  <img src="/img/2023/Homework8/shape.png" srcset="/img/loading.gif" lazyload alt="shape"></p>
<ul>
<li>默认的Shape是Cone(圆锥)，将其Angle设为0就是圆柱，修改Thickness可以呈现环状。</li>
<li>Sphere是球状发射，Hemisphere是半球状发射，可用于一些需要中心向外发散的3d效果。</li>
<li>Box是盒装发射，也比较常用。修改Scale形成一定范围，粒子速度设为很小，在体积发射时，可以营造类似萤火虫等氛围感。</li>
<li>Circle圆、Edge边都是二维图形，也常用。圆可以作中心向外发散的2d效果，边可以作一些刀锋效果。</li>
</ul>
</li>
<li><p>Trails 模块</p>
<p>  如果会用GameObject的Trail，这个是相通的。可以用于制作拖尾效果。本人对这个也是初步了解状态，只会做很简陋的效果。</p>
<p>  <img src="/img/2023/Homework8/trail.png" srcset="/img/loading.gif" lazyload alt="trail"></p>
<ul>
<li>Mode模式选择：Particles是对每个粒子单独使用；Ribbon是通过粒子间连接形成。</li>
<li>Paricles模式：Ratio表示粒子会应用Trail的百分比；Lifetime为Trail的生命周期；Die with Particles表示是否随粒子销毁而销毁。</li>
<li>Ribbon模式：Ribbon count表示连线的数量，注意这个数量不要超过粒子发射的数量。</li>
</ul>
</li>
</ul>
<p>其他模块就不做介绍了，大多数看手册都能理解的。</p>
<h3 id="六、“雨云弹”制作"><a href="#六、“雨云弹”制作" class="headerlink" title="六、“雨云弹”制作"></a>六、“雨云弹”制作</h3><p>​		由于写详细教程会使篇幅太长，此处只放出相关参数图片。</p>
<p>​		个人通用的制作思路是：整体形状-&gt;发射的时间、数量及速度-&gt;主要效果-&gt;颜色调整。</p>
<h5 id="“雨云弹”结构图"><a href="#“雨云弹”结构图" class="headerlink" title="“雨云弹”结构图"></a>“雨云弹”结构图</h5><p>“雨云弹”分为四个部分：①上升雾，②云，③雨，④雨滴溅射。</p>
<p><img src="/img/2023/Homework8/%E5%AF%B9%E8%B1%A1%E7%BB%93%E6%9E%84%E5%9B%BE.png" srcset="/img/loading.gif" lazyload alt="对象结构图"></p>
<p><strong>注</strong>：</p>
<ul>
<li>Transform 组件参数放进模块参数图里供作参考。</li>
<li>每个效果都不需要更改默认的Renderer渲染模块，勾上就行。</li>
</ul>
<p>:foggy:</p>
<h4 id="1-上升雾"><a href="#1-上升雾" class="headerlink" title="1 上升雾"></a>1 上升雾</h4><h5 id="设计要点"><a href="#设计要点" class="headerlink" title="设计要点"></a>设计要点</h5><ul>
<li>整体呈圆柱状上升喷射；</li>
<li>向上喷射速度快时间短，要有”嘭“的感觉；</li>
<li>有雾的绵密感。</li>
</ul>
<h5 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h5><p><img src="/img/2023/Homework8/up.png" srcset="/img/loading.gif" lazyload alt="up"></p>
<h5 id="模块参数图"><a href="#模块参数图" class="headerlink" title="模块参数图"></a>模块参数图</h5><ul>
<li><p>Transform</p>
<p>  <img src="/img/2023/Homework8/1transform.png" srcset="/img/loading.gif" lazyload alt="1transform"></p>
</li>
<li><p>Main</p>
<p>  <img src="/img/2023/Homework8/1main.png" srcset="/img/loading.gif" lazyload alt="1main"></p>
</li>
<li><p>Emission</p>
<p>  <img src="/img/2023/Homework8/1emission.png" srcset="/img/loading.gif" lazyload alt="1emission"></p>
</li>
<li><p>Shape</p>
<p>  <img src="/img/2023/Homework8/1shape.png" srcset="/img/loading.gif" lazyload alt="1shape"></p>
</li>
<li><p>Color over Lifetime</p>
<p>  <img src="/img/2023/Homework8/1color.png" srcset="/img/loading.gif" lazyload alt="1color"></p>
</li>
</ul>
<hr>
<p>:cloud:</p>
<h4 id="2-云"><a href="#2-云" class="headerlink" title="2 云"></a>2 云</h4><h5 id="设计要点-1"><a href="#设计要点-1" class="headerlink" title="设计要点"></a>设计要点</h5><ul>
<li>整体呈中心水平向外扩散；</li>
<li>云的消散有渐隐效果；</li>
<li>云的运动有波动感。</li>
</ul>
<h5 id="效果图-1"><a href="#效果图-1" class="headerlink" title="效果图"></a>效果图</h5><p><img src="/img/2023/Homework8/cloud.png" srcset="/img/loading.gif" lazyload alt="cloud"></p>
<h5 id="模块参数图-1"><a href="#模块参数图-1" class="headerlink" title="模块参数图"></a>模块参数图</h5><ul>
<li><p>Transform</p>
<p>  <img src="/img/2023/Homework8/2transform.png" srcset="/img/loading.gif" lazyload alt="2transform"></p>
</li>
<li><p>Main</p>
<p>  <img src="/img/2023/Homework8/2main.png" srcset="/img/loading.gif" lazyload alt="2main"></p>
</li>
<li><p>Emission</p>
<p>  <img src="/img/2023/Homework8/2emission.png" srcset="/img/loading.gif" lazyload alt="2emission"></p>
</li>
<li><p>Shape</p>
<p>  <img src="/img/2023/Homework8/2shape.png" srcset="/img/loading.gif" lazyload alt="2shape"></p>
</li>
<li><p>Velocity over Lifetime</p>
<p>  <img src="/img/2023/Homework8/2velocity.png" srcset="/img/loading.gif" lazyload alt="2velocity"></p>
</li>
<li><p>Color over Lifetime</p>
<p>  <img src="/img/2023/Homework8/2color.png" srcset="/img/loading.gif" lazyload alt="2color"></p>
</li>
<li><p>Size over Lifetime</p>
<p>  <img src="/img/2023/Homework8/2size.png" srcset="/img/loading.gif" lazyload alt="2size"></p>
</li>
</ul>
<hr>
<p>:cloud_with_rain:</p>
<h4 id="3-雨"><a href="#3-雨" class="headerlink" title="3 雨"></a>3 雨</h4><h5 id="设计要点-2"><a href="#设计要点-2" class="headerlink" title="设计要点"></a>设计要点</h5><ul>
<li>整体呈圆柱形向下喷射；</li>
<li>雨的下落要迅速，呈线状；</li>
<li>雨碰撞地面触发雨滴溅射效果。</li>
</ul>
<h5 id="效果图-2"><a href="#效果图-2" class="headerlink" title="效果图"></a>效果图</h5><p><img src="/img/2023/Homework8/down.png" srcset="/img/loading.gif" lazyload alt="down"></p>
<h5 id="模块参数图-2"><a href="#模块参数图-2" class="headerlink" title="模块参数图"></a>模块参数图</h5><ul>
<li><p>Transform</p>
<p>  <img src="/img/2023/Homework8/3transform.png" srcset="/img/loading.gif" lazyload alt="3transform"></p>
</li>
<li><p>Main</p>
<p>  <img src="/img/2023/Homework8/3main.png" srcset="/img/loading.gif" lazyload alt="3main"></p>
</li>
<li><p>Emission</p>
<p>  <img src="/img/2023/Homework8/3emission.png" srcset="/img/loading.gif" lazyload alt="3emission"></p>
</li>
<li><p>Shape</p>
<p>  <img src="/img/2023/Homework8/3shape.png" srcset="/img/loading.gif" lazyload alt="3shape"></p>
</li>
<li><p>Size over Lifetime</p>
<p>  <img src="/img/2023/Homework8/3size.png" srcset="/img/loading.gif" lazyload alt="3size"></p>
</li>
<li><p>Collision</p>
<p>  <img src="/img/2023/Homework8/3collision.png" srcset="/img/loading.gif" lazyload alt="3collision"></p>
</li>
<li><p>Sub Emitters</p>
<p>  需做好“<strong>4 雨滴溅射</strong>”部分再勾选修改该模块。</p>
<p>  <img src="/img/2023/Homework8/3sub.png" srcset="/img/loading.gif" lazyload alt="3sub"></p>
</li>
<li><p>Trails</p>
<p>  <img src="/img/2023/Homework8/3trail.png" srcset="/img/loading.gif" lazyload alt="3trail"></p>
</li>
</ul>
<hr>
<p>:watermelon:</p>
<h4 id="4-雨滴溅射"><a href="#4-雨滴溅射" class="headerlink" title="4 雨滴溅射"></a>4 雨滴溅射</h4><h5 id="设计要点-3"><a href="#设计要点-3" class="headerlink" title="设计要点"></a>设计要点</h5><ul>
<li>整体呈中心斜向上向外溅射；</li>
<li>雨滴溅射碰撞地面有反弹效果，营造动感。</li>
</ul>
<h5 id="效果图-3"><a href="#效果图-3" class="headerlink" title="效果图"></a>效果图</h5><p><img src="/img/2023/Homework8/circle.png" srcset="/img/loading.gif" lazyload alt="circle"></p>
<h5 id="模块参数图-3"><a href="#模块参数图-3" class="headerlink" title="模块参数图"></a>模块参数图</h5><ul>
<li><p>Transform</p>
<p>  <img src="/img/2023/Homework8/4transform.png" srcset="/img/loading.gif" lazyload alt="4transform"></p>
</li>
<li><p>Main</p>
<p>  <img src="/img/2023/Homework8/4main.png" srcset="/img/loading.gif" lazyload alt="4main"></p>
</li>
<li><p>Emission</p>
<p>  <img src="/img/2023/Homework8/4emission.png" srcset="/img/loading.gif" lazyload alt="4emission"></p>
</li>
<li><p>Shape</p>
<p>  <img src="/img/2023/Homework8/4shape.png" srcset="/img/loading.gif" lazyload alt="4shape"></p>
</li>
<li><p>Color over Lifetime</p>
<p>  <img src="/img/2023/Homework8/4color.png" srcset="/img/loading.gif" lazyload alt="4color"></p>
</li>
<li><p>Size over Lifetime</p>
<p>  <img src="/img/2023/Homework8/4size.png" srcset="/img/loading.gif" lazyload alt="4size"></p>
</li>
<li><p>Noise</p>
<p>  <img src="/img/2023/Homework8/4noise.png" srcset="/img/loading.gif" lazyload alt="4noise"></p>
</li>
<li><p>Collision</p>
<p>  <img src="/img/2023/Homework8/4collision.png" srcset="/img/loading.gif" lazyload alt="4collision"></p>
</li>
</ul>
<hr>
<p>:star:</p>
<p><strong>注</strong>：</p>
<p>还有一件事，因为我在Rain空对象挂了一个只用Main的ParticleSystem组件，修改了生命周期，并将Stop Action设置为Destroy，效果类似于这个粒子播放xx时长，结束了这个对象就会自动销毁。因为在粒子系统触发脚本(ParticleTrigger)中，当球体与地面碰撞，这个粒子系统会作为预制件实例化，每撞一次就会实例化一次，如果不及时销毁就会一直在那里，但其实它播放一次就不再用了。</p>
<p>当然，如果不带这个组件，处理方式也可以修改为，一开始就在场景初始化这个粒子系统，并设置不播放，每检测碰撞，就对这个空对象下挂载的三个粒子系统进行同时播放一次。我觉得比较麻烦，就采取了第一种方法，这在性能方面可能有所增加。</p>
<p><img src="/img/2023/Homework8/5main.png" srcset="/img/loading.gif" lazyload alt="5main"></p>
<h3 id="七、其他部分制作"><a href="#七、其他部分制作" class="headerlink" title="七、其他部分制作"></a>七、其他部分制作</h3><h4 id="1-背景"><a href="#1-背景" class="headerlink" title="1 背景"></a>1 背景</h4><p>​		由5个带上黑色材质球的Plane简单拼凑组成，注意Plane的朝向并检查是否带有碰撞器。用于粒子系统碰撞及颜色衬托。</p>
<p><img src="/img/2023/Homework8/bg.png" srcset="/img/loading.gif" lazyload alt="bg"></p>
<h4 id="2-球体"><a href="#2-球体" class="headerlink" title="2 球体"></a>2 球体</h4><ul>
<li><p>一个带有Trail子对象的球体，组件勾上碰撞器，加入刚体和碰撞检测的脚本，设置如下图。</p>
<p>  <img src="/img/2023/Homework8/ball.png" srcset="/img/loading.gif" lazyload alt="ball"></p>
</li>
<li><p>球体的Trail拖尾效果做得比较简陋，设置如下图。</p>
<p>  <img src="/img/2023/Homework8/btrail.png" srcset="/img/loading.gif" lazyload alt="btrail"></p>
</li>
</ul>
<h4 id="3-相机"><a href="#3-相机" class="headerlink" title="3 相机"></a>3 相机</h4><p>​		新建Camera，通过<code>ctrl+shift+f</code>将当前场景的视角作为Camera的视角，这里添加了俯视DownCamera和仰视UpCamera的视角。通过脚本添加预制件及视角切换。</p>
<h3 id="八、部分代码"><a href="#八、部分代码" class="headerlink" title="八、部分代码"></a>八、部分代码</h3><p>代码部分参考了之前做的射箭部分，主要用于获取并抛掷球体，也不是主要部分。</p>
<p>设计模式采用课堂上的设计模式，参考的UML图如下。画的很好了，这里就不重新画了。</p>
<p><img src="/img/2023/Homework8/design.png" srcset="/img/loading.gif" lazyload alt="design"></p>
<h4 id="代码结构图"><a href="#代码结构图" class="headerlink" title="代码结构图"></a>代码结构图</h4><p>日常上代码结构图，dddd。</p>
<p><img src="/img/2023/Homework8/Scripts.png" srcset="/img/loading.gif" lazyload alt="Scripts"></p>
<h4 id="ParticleTrigger"><a href="#ParticleTrigger" class="headerlink" title="ParticleTrigger"></a>ParticleTrigger</h4><p>粒子系统触发脚本。在球体碰撞的位置实例化粒子系统预制件Rain，它会自动播放的。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ParticleTrigger</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnCollisionEnter</span>(<span class="hljs-params">Collision other</span>)</span><br>    &#123;<br>        GameObject Rain = GameObject.Instantiate&lt;GameObject&gt;(Resources.Load&lt;GameObject&gt;(<span class="hljs-string">&quot;Prefabs/Rain&quot;</span>));<br>        Rain.transform.position = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-keyword">this</span>.transform.position.x,<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.transform.position.z);<br>        <span class="hljs-keyword">this</span>.gameObject.tag = <span class="hljs-string">&quot;Finish&quot;</span>;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<h4 id="BallFlyAction"><a href="#BallFlyAction" class="headerlink" title="BallFlyAction"></a>BallFlyAction</h4><p>球体飞行运动。在初始给一个瞬间的力以添加初速度，然后给一个持续向下的力模拟重力。模拟一个斜向上抛体运动。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BallFlyAction</span> : <span class="hljs-title">SSAction</span><br>&#123;<br>    <span class="hljs-keyword">private</span> Vector3 force = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">0</span>,<span class="hljs-number">80f</span>,<span class="hljs-number">30f</span>);<br>    <span class="hljs-keyword">private</span> Vector3 gravity = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">0</span>,<span class="hljs-number">-0.3f</span>,<span class="hljs-number">0</span>);<br>    <span class="hljs-comment">// public float speed;</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> BallFlyAction <span class="hljs-title">GetBallFlyAction</span>()</span>&#123;<br>        BallFlyAction action = ScriptableObject.CreateInstance&lt;BallFlyAction&gt;();<br>        <span class="hljs-keyword">return</span> action;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>()</span>&#123;<br>        <br>        gameObject.GetComponent&lt;Rigidbody&gt;().isKinematic = <span class="hljs-literal">false</span>;<br>        gameObject.GetComponent&lt;Rigidbody&gt;().velocity = Vector3.zero;<br>        gameObject.GetComponent&lt;Rigidbody&gt;().AddForce(force,ForceMode.Impulse);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>()</span><br>    &#123;   <br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.gameObject.tag == <span class="hljs-string">&quot;Finish&quot;</span>)&#123;<br>            <span class="hljs-keyword">this</span>.destroy = <span class="hljs-literal">true</span>;<br>        &#125;  <br>        gameObject.GetComponent&lt;Rigidbody&gt;().AddForce(gravity,ForceMode.Impulse);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="Interface"><a href="#Interface" class="headerlink" title="Interface"></a>Interface</h4><p>包括<code>IUserController</code>与<code>ISceneController</code>,分别对应用户操作接口与场景行为接口。</p>
<p>Init是获取球体，Shoot是发射球体，ChangeView用于切换视角，IsBallNull用于判断是否获取了球体；</p>
<p>LoadResource是实例化背景及相机。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IUserAction</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Init</span>()</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Shoot</span>()</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ChangeView</span>(<span class="hljs-params"><span class="hljs-built_in">char</span> c</span>)</span>;<br>    <span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">IsBallNull</span>()</span>;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">ISceneController</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">LoadResource</span>()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="SceneController"><a href="#SceneController" class="headerlink" title="SceneController"></a>SceneController</h4><p>场景控制器。用于控制整个场景，实现用户操作接口与场景行为接口。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SceneController</span> : <span class="hljs-title">MonoBehaviour</span>, <span class="hljs-title">IUserAction</span>, <span class="hljs-title">ISceneController</span><br>&#123;<br>    BallFactory factory;<br>    <span class="hljs-keyword">public</span> BallActionManager actionManager;<br>    <span class="hljs-keyword">public</span> myUserGUI userGUI;<br>    <span class="hljs-keyword">public</span> GameObject ball = <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">public</span> Camera mainCamera;<br>    <span class="hljs-keyword">public</span> Camera upCamera;<br>    <span class="hljs-keyword">public</span> Camera downCamera;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>()</span><br>    &#123;<br>        Director director = Director.getInstance();<br>        director.currentSceneController = <span class="hljs-keyword">this</span>;<br>        gameObject.AddComponent&lt;BallFactory&gt;();<br>        factory = Singleton&lt;BallFactory&gt;.Instance;<br>        actionManager = gameObject.AddComponent&lt;BallActionManager&gt;() <span class="hljs-keyword">as</span> BallActionManager;<br>        userGUI = gameObject.AddComponent&lt;myUserGUI&gt;() <span class="hljs-keyword">as</span> myUserGUI;<br>        mainCamera = Camera.main;<br>        LoadResource();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LoadResource</span>()</span><br>    &#123;<br>        GameObject.Instantiate&lt;GameObject&gt;(Resources.Load&lt;GameObject&gt;(<span class="hljs-string">&quot;Prefabs/Background&quot;</span>));<br>        upCamera = GameObject.Instantiate&lt;GameObject&gt;(Resources.Load&lt;GameObject&gt;(<span class="hljs-string">&quot;Prefabs/UpCamera&quot;</span>)).GetComponent&lt;Camera&gt;();<br>        downCamera = GameObject.Instantiate&lt;GameObject&gt;(Resources.Load&lt;GameObject&gt;(<span class="hljs-string">&quot;Prefabs/DownCamera&quot;</span>)).GetComponent&lt;Camera&gt;();<br>        ChangeView(<span class="hljs-string">&#x27;z&#x27;</span>);<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ChangeView</span>(<span class="hljs-params"><span class="hljs-built_in">char</span> c</span>)</span><br>    &#123;<br>        <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&#x27;z&#x27;</span>)&#123;<br>            mainCamera.enabled = <span class="hljs-literal">true</span>;<br>            upCamera.enabled = <span class="hljs-literal">false</span>;<br>            downCamera.enabled = <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&#x27;x&#x27;</span>)&#123;<br>            mainCamera.enabled = <span class="hljs-literal">false</span>;<br>            upCamera.enabled = <span class="hljs-literal">true</span>;<br>            downCamera.enabled = <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span>&#123;<br>            mainCamera.enabled = <span class="hljs-literal">false</span>;<br>            upCamera.enabled = <span class="hljs-literal">false</span>;<br>            downCamera.enabled = <span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Init</span>()</span><br>    &#123;<br>        <span class="hljs-keyword">if</span>(ball == <span class="hljs-literal">null</span>)&#123;<br>            ball = factory.GetBall();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Shoot</span>()</span><br>    &#123;<br>        actionManager.MoveBall(ball);<br>        ball = <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>()</span><br>    &#123;<br>        factory.FreeBall();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">IsBallNull</span>()</span>&#123;<br>        <span class="hljs-keyword">return</span> (ball == <span class="hljs-literal">null</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="myUserGUI"><a href="#myUserGUI" class="headerlink" title="myUserGUI"></a>myUserGUI</h4><p>用户界面。用于监测按键及控制说明。按<code>z</code>,<code>x</code>,<code>c</code>可以切换视角，<code>space</code>可以获取球体，<code>j</code>可以发射球体。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">myUserGUI</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">private</span> IUserAction action;<br>    GUIStyle titleStyle = <span class="hljs-keyword">new</span> GUIStyle();<br>    GUIStyle textStyle = <span class="hljs-keyword">new</span> GUIStyle();<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>()</span>&#123;<br>        action = Director.getInstance().currentSceneController <span class="hljs-keyword">as</span> IUserAction;<br><br>        titleStyle.normal.textColor = <span class="hljs-keyword">new</span> Color(<span class="hljs-number">0.9f</span>, <span class="hljs-number">0.65f</span>, <span class="hljs-number">0.99f</span>, <span class="hljs-number">1</span>);<br>        titleStyle.normal.background = <span class="hljs-literal">null</span>;<br>        titleStyle.fontSize = <span class="hljs-number">30</span>;<br>        titleStyle.alignment = TextAnchor.MiddleCenter;<br><br>        textStyle.normal.textColor = Color.white;<br>        textStyle.normal.background = <span class="hljs-literal">null</span>;<br>        textStyle.fontSize = <span class="hljs-number">20</span>;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>()</span>&#123;<br>        <span class="hljs-keyword">if</span>(!action.IsBallNull())&#123;<br>            <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.J)) action.Shoot();<br>        &#125;<br>        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Space)) action.Init();<br>        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Z)) action.ChangeView(<span class="hljs-string">&#x27;z&#x27;</span>);<br>        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.X)) action.ChangeView(<span class="hljs-string">&#x27;x&#x27;</span>);<br>        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.C)) action.ChangeView(<span class="hljs-string">&#x27;c&#x27;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>()</span> &#123;<br>        GUI.Label(<span class="hljs-keyword">new</span> Rect(Screen.width<span class="hljs-number">-200</span>, <span class="hljs-number">5</span>, <span class="hljs-number">200</span>, <span class="hljs-number">50</span>), <span class="hljs-string">&quot;粒子效果展示&quot;</span>, titleStyle);<br>        GUI.Label(<span class="hljs-keyword">new</span> Rect(<span class="hljs-number">12</span>, <span class="hljs-number">12</span>, <span class="hljs-number">200</span>, <span class="hljs-number">50</span>), <span class="hljs-string">&quot;视角切换：z, x, c&quot;</span>, textStyle);   <br>        GUI.Label(<span class="hljs-keyword">new</span> Rect(<span class="hljs-number">12</span>, <span class="hljs-number">42</span>, <span class="hljs-number">200</span>, <span class="hljs-number">50</span>), <span class="hljs-string">&quot;取物：space&quot;</span>, textStyle);<br>        GUI.Label(<span class="hljs-keyword">new</span> Rect(<span class="hljs-number">12</span>, <span class="hljs-number">72</span>, <span class="hljs-number">200</span>, <span class="hljs-number">50</span>), <span class="hljs-string">&quot;发射：j&quot;</span>, textStyle);    <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="九、小结"><a href="#九、小结" class="headerlink" title="九、小结"></a>九、小结</h3><ul>
<li>做粒子特效，除了灵感，理解也很重要，即使是默认素材，也能作出很多花样。</li>
<li>内置粒子系统还可用于做粒子流编程，作出一些流体效果，这里没有深入研究。</li>
<li>主要是学习了模块面板的使用，没怎么用api控制粒子系统，对api还不太熟悉。</li>
</ul>
<h3 id="十、参考"><a href="#十、参考" class="headerlink" title="十、参考"></a>十、参考</h3><ul>
<li><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2021.3/Manual/ParticleSystemModules.html">Unity官方手册ParticleSystem</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV17V4y1K7Cn/?spm_id_from=333.999.0.0&vd_source=e218f5ce60f09f4f0dc35f89ecd9b4f5">bilibili-梦小天幼的粒子系统详解系列视频</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1yy4y1B7ir/?from=search&seid=976722035306074353&spm_id_from=333.337.0.0&vd_source=e218f5ce60f09f4f0dc35f89ecd9b4f5">bilibili-Unity官方的粒子效果制作教学</a></li>
</ul>
<blockquote>
<p>2023.01.06			Cauchy.</p>
</blockquote>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Game/" class="category-chain-item">Game</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/unity/" class="print-no-link">#unity</a>
      
        <a href="/tags/particle/" class="print-no-link">#particle</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Final: 粒子系统与流动效果</div>
      <div>https://cauchyoooo.github.io/2023/01/05/2023/Homework8/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Cauchy</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年1月5日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/01/02/2025/Games101-00/" title="新坑&lt;备忘&gt;">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">新坑&lt;备忘&gt;</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/12/18/2022/Homework7/" title="HW7: 模型与动画">
                        <span class="hidden-mobile">HW7: 模型与动画</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>





  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
